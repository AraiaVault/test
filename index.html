<link rel="stylesheet" href="style.css">
<style> 
body { 
  background-image: url('image.png'); 
  background-repeat: repeat; 
  background-attachment: fixed; 
}
</style>
<script src="https://kit.fontawesome.com/db2d4e4bde.js" crossorigin="anonymous"></script>
<body class = "head">
	<input class = "search" type="text" required list ="Tile">
	<datalist id="Tile">
		<option value="Medical Info"></option>
		<option value="Passwords"></option>
		<option value="Bank account info"></option>
		<option value="Adresse"></option>
	</datalist> 
	<button type = "button" class = "add-tile" onclick = "openPopup()">+</button>
	<div class = "popup" id = "popup">
		<input type="text" name = "title" required class="tile-name-input" id = "tileTitle">
		<button type = "button" class = "hide" onclick = "closePopup()">x</button>
		<form>
			<div class = "File-Types">
				<button class = "txt" type = "button" onclick = "openTxtInput()"> Txt </button>
				<button class = "txt" type = "button" onclick = "openImgUpload()"> Img </button>
				<button class = "txt" type = "button" onclick = "openTxtInput()"> Mov </button>
			</div>
			<textarea id="txtInput" name="data"  type="text" required class="txt-input" placeholder="Write something.."></textarea>
		</form>
		<div class = "upload-area" id = "imgUpload">
			<div class = "icon"><i class="fa-solid fa-file-arrow-up"></i></div>
		</div>
		<button type = "button" class = "done" onclick = "closePopup(); createAndDownloadTile()" id = "saveButton">Save</button>
	</div>
<script>
var popup = document.getElementById("popup");
var txtInput = document.getElementById("txtInput");
var imgUpload = document.getElementById("imgUpload");
var saveButton = document.getElementById("saveButton");

function openPopup(){
	popup.classList.add("open-popup");
	saveButton.style.display = "none";
}
function closePopup(){
	popup.classList.remove("open-popup");
	imgUpload.style.display = "none";
	txtInput.style.display = "none";
	document.getElementById('tileTitle').value = '';
        document.getElementById('txtInput').value = '';
	saveButton.style.display = "none";
}
function openTxtInput(){
	txtInput.style.display = "block";
	imgUpload.style.display = "none";
	saveButton.style.display = "block";
}
function openImgUpload(){
	imgUpload.style.display = "block";
	txtInput.style.display = "none";
	saveButton.style.display = "block";
}
</script>
</body>
<body class = "main">
	<div class = "flex">
		<div class = "Scrollable">
			<div class="Tile">
				<h1> Tile </h1>
			</div>
			<div class="Tile">
				<h1> Tile </h1>
			</div>
			<div class="Tile">
				<h1> Tile </h1>
			</div>
			<div class="Tile">
				<h1> Tile </h1>
			</div>
			<div class="Tile">
				<h1> Tile </h1>
			</div>
			<div class="Tile">
				<h1> Tile </h1>
			</div>
			<div class="Tile">
				<h1> Tile </h1> 
			</div>
		</div>
	</div>
</body>

<script>
function createAndDownloadTile() {
        const title = document.getElementById('tileTitle').value;
        const content = document.getElementById('tileContent').value;
        const blob = new Blob([content], { type: 'text/plain' });
        const folder = 'vault_tiles';
        const anchor = document.createElement('a');
	anchor.download = `${folder}/${title}.txt`;
	anchor.href = window.URL.createObjectURL(blob);
	document.body.appendChild(anchor);
        anchor.click();
        document.body.removeChild(anchor);
       // closePopup();
       }

       }
</script>
